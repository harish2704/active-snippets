{"k":"0000000078","o":"0000000879","v":"001"}
{"_id":2,"_uid":3,"_dt":1394442703024,"_s":"4b9bc317bce33a43e8e02896fd08fa78"}
{"_id":{"$wrap":"$oid","v":2},"__v":0,"name":"Express index function","source":"<% modelClass = @capitalize @model; modelObject = @small @model; modelColelction = @small ( @pluralize @model )  %>\r\nexports.index = function(req, res ) {\r\n    <%- modelClass %>.count( {}, function( err, count ){\r\n        var paginationParams = {};\r\n        paginationParams.count = count;\r\n        paginationParams.page = req.query.page;\r\n\r\n        var pagination = paginator.paginate( paginationParams );\r\n\r\n        return <%- modelClass %>.find({}).skip(pagination.start-1)\r\n        .limit( paginator.defaults.size)\r\n        .exec(function( err, <%- modelColelction  %> ){\r\n            return res.render('<%- modelObject %>/index', { <%- modelColelction %>: <%- modelColelction %>, pagination: pagination });\r\n        });\r\n    });\r\n};","settings":{"model":"string"}}
{"k":"0000000078","o":"0000002375","v":"001"}
{"_id":3,"_uid":3,"_dt":1394453918459,"_s":"a9e69cc977946cab84095819ba4f9f77"}
{"name":"App.js","source":"/**\r\n * Module dependencies.\r\n */\r\n\r\nrequire('express-namespace');\r\nrequire('express-resource');\r\n\r\nvar express = require('express'),\r\n    http = require('http'),\r\n    requestTypeOverride = require('connect-request-type-override'),\r\n    passport = require('passport'),\r\n    respond = require('express-respond'),\r\n    connectFlash = require('connect-flash'),\r\n    responseCodes = require('./lib/response-code'),\r\n    path = require('path');\r\n\r\nvar ECT = require( 'ect' );\r\nvar ectRenderer = ECT({ watch: true, root: __dirname + '/views', ext: '.html' });\r\n\r\n\r\nvar db = require('./lib/db'),\r\n    database = require('./config/database-sqlite.js');\r\n\r\nvar app = express();\r\napp.response.respond = respond(responseCodes);\r\napp.engine('html', ectRenderer.render);\r\n\r\ndb.connect( database );\r\n\r\nvar routes = require('./routes');\r\nvar User = require('./models/User');\r\n\r\npassport.use(User.createStrategy());\r\npassport.serializeUser(User.serializeUser());\r\npassport.deserializeUser(User.deserializeUser());\r\n\r\napp.configure(function(){\r\n    app.set('port', process.env.PORT || <%- @port %>);\r\n    app.set('views', __dirname + '/views');\r\n    app.set('view engine', 'html');\r\n    app.use(express.favicon());\r\n    app.use(express.logger('dev'));\r\n    app.use(express.bodyParser());\r\n    app.use(express.methodOverride());\r\n    app.use(express.cookieParser('your secret here'));\r\n    app.use(requestTypeOverride());\r\n    <% if @session : %>\r\napp.use(express.session());\r\n    <% end %>\r\napp.use(connectFlash());\r\n    app.use(passport.initialize());\r\n    app.use(passport.session());\r\n    app.use(function(req, res, next){         // Session helper\r\n        res.locals.user = req.user;\r\n        res.locals.data = {};\r\n        res.locals.flash = req.flash();\r\n        return next();\r\n    });\r\n    app.use(app.router);\r\n    app.use(express.static(path.join(__dirname, 'public')));\r\n});\r\n\r\napp.configure('development', function(){\r\n    app.use(express.errorHandler());\r\n});\r\n\r\nroutes( app );\r\n\r\nhttp.createServer(app).listen(app.get('port'), function(){\r\n    console.log(\"Express server listening on port \" + app.get('port'));\r\n});\r\n","_id":{"$wrap":"$oid","v":3},"__v":0,"settings":{"session":"boolean","port":"number"}}
